<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Getting openshift origin “cluster up” working with xhyve | Chmouel's blog</title><meta name=keywords content="OpenShift"><meta name=description content="In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It&rsquo;s a pretty nice way to get you a new openshift origin environment on your laptop without the hassle.
On macosx there is a (as well relatively) new lightweight virtualization solution called xhyve it&rsquo;s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running."><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2016/09/19/getting-openshift-origin-cluster-up-working-with-xhyve/><link crossorigin=anonymous href=/assets/css/stylesheet.6f7f13d3d67cfd883158e82d8eac85f5aed561afc99d35624ebeb913747e0ec5.css integrity="sha256-b38T09Z8/YgxWOgtjqyF9a7VYa/JnTViTr65E3R+DsU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Getting openshift origin “cluster up” working with xhyve"><meta property="og:description" content="In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It&rsquo;s a pretty nice way to get you a new openshift origin environment on your laptop without the hassle.
On macosx there is a (as well relatively) new lightweight virtualization solution called xhyve it&rsquo;s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2016/09/19/getting-openshift-origin-cluster-up-working-with-xhyve/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-09-19T06:00:54+00:00"><meta property="article:modified_time" content="2016-09-19T06:00:54+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting openshift origin “cluster up” working with xhyve"><meta name=twitter:description content="In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It&rsquo;s a pretty nice way to get you a new openshift origin environment on your laptop without the hassle.
On macosx there is a (as well relatively) new lightweight virtualization solution called xhyve it&rsquo;s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Getting openshift origin “cluster up” working with xhyve","item":"https://blog.chmouel.com/2016/09/19/getting-openshift-origin-cluster-up-working-with-xhyve/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Getting openshift origin “cluster up” working with xhyve","name":"Getting openshift origin “cluster up” working with xhyve","description":"In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It\u0026rsquo;s a pretty nice way to get you a new openshift origin environment on your laptop without the hassle.\nOn macosx there is a (as well relatively) new lightweight virtualization solution called xhyve it\u0026rsquo;s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running.","keywords":["OpenShift"],"articleBody":"In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It’s a pretty nice way to get you a new openshift origin environment on your laptop without the hassle.\nOn macosx there is a (as well relatively) new lightweight virtualization solution called xhyve it’s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running. It seemed to be a perfect fit to try those two together.\nxhyve docker machine driver needed to be installed first so I just went on its website here :\nhttps://github.com/zchee/docker-machine-driver-xhyve\nand followed the installation instruction from the README which I could see everything was working :\nI then fired up the “oc cluster up –create-machine” command and to my disappointment it was starting by default the virtualbox and I could not see anything in the options how to specify the “–driver xhyve” option to docker-machine which is what the oc cluster feature is using on the backend to bootstrap a docker environment.\nDigging into the code it seems that the oc cluster has those feature set in static as virtualbox :\nhttps://github.com/openshift/origin/blob/85eb37b34f0657631592356d020cef5a58470f8e/pkg/bootstrap/docker/dockermachine/helper.go#L56-L79\nsince there was no way to pass other options I first looked in the github issues to see if there was nothing reported about it and sent a feature request here,\nI started to think a little bit more about a workaround going from modifying to my liking and recompiling the oc client or to just give up on xhyve but in fact the solution is actually much simplier.\nSince there is the ability to specify to “oc cluster up” an already configured docker-machine environment with the \" –docker-machine\" option. We just had to configured previously properly first (which is with the option –engine-insecure-registry 172.30.0.0/16) :\nand after a bit the new docker should be setup which can be easily used with the command eval $(docker-machine env xhyve)\nI then just have to start my oc cluster up with the option –docker-machine=“xhyve” and I would get my nicely setuped openshift origin cluster to play with in mere seconds :\n","wordCount":"360","inLanguage":"en","datePublished":"2016-09-19T06:00:54Z","dateModified":"2016-09-19T06:00:54Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2016/09/19/getting-openshift-origin-cluster-up-working-with-xhyve/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><a href=https://redhat.com title=Work><span>Work</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Getting openshift origin “cluster up” working with xhyve</h1><div class=post-meta><span title='2016-09-19 06:00:54 +0000 UTC'>September 19, 2016</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2016-09-19-getting-openshift-origin-cluster-up-working-with-xhyve.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>In latest openshift client (oc) there is a nifty (relatively) new feature to get you a OpenShift cluster starting (very) quickly. It&rsquo;s a pretty nice way to get you a new openshift origin environment on your laptop  without the hassle.</p><p>On macosx there is a (as well relatively) new lightweight virtualization solution called <a href=https://github.com/mist64/xhyve>xhyve</a> it&rsquo;s a bit like KVM in the sense of being lightweight and does not need like virtualbox or vmware to get a UI running. It seemed to be a perfect fit to try those two together.</p><p>xhyve docker machine driver needed to be installed first so I just went on its website here :</p><p><a href=https://github.com/zchee/docker-machine-driver-xhyve>https://github.com/zchee/docker-machine-driver-xhyve</a></p><p>and followed the installation instruction from the README which I could see everything was working :</p><p><img loading=lazy src=/wp-content/uploads/2016/09/2016-09-18__21-27-28-10262.png alt></p><p>I then fired up the &ldquo;oc cluster up &ndash;create-machine&rdquo; command and to my disappointment it was starting by default the virtualbox and I could not see anything in the options how to specify the &ldquo;&ndash;driver xhyve&rdquo; option to docker-machine which is what the oc cluster feature is using on the backend to bootstrap a docker environment.</p><p>Digging into the code it seems that the oc cluster has those feature set in static as virtualbox :</p><p><a href=https://github.com/openshift/origin/blob/85eb37b34f0657631592356d020cef5a58470f8e/pkg/bootstrap/docker/dockermachine/helper.go#L56-L79>https://github.com/openshift/origin/blob/85eb37b34f0657631592356d020cef5a58470f8e/pkg/bootstrap/docker/dockermachine/helper.go#L56-L79</a></p><p>since there was no way to pass other options I first looked in the github issues to see if there was nothing reported about it and sent a feature request <a href=https://github.com/openshift/origin/issues/10982>here</a>,</p><p>I started to think a little bit more about a workaround going from modifying to my liking and recompiling the oc client or to just give up on xhyve but in fact the solution is actually much simplier.</p><p>Since there is the ability to specify to &ldquo;oc cluster up&rdquo; an already configured docker-machine environment with the " &ndash;docker-machine" option. We just had to configured previously properly first (which is with the option &ndash;engine-insecure-registry 172.30.0.0/16) :</p><p><img loading=lazy src=/wp-content/uploads/2016/09/2016-09-18__21-05-12-14647.png alt></p><p>and after a bit the new docker should be setup which can be easily used with the command eval $(docker-machine env xhyve)</p><p>I then just have to start my oc cluster up with the option  &ndash;docker-machine=&ldquo;xhyve&rdquo; and I would get my nicely setuped openshift origin cluster to play with in mere seconds :</p><p><img loading=lazy src=/wp-content/uploads/2016/09/2016-09-18__21-04-47-3802.png alt></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/openshift/>OpenShift</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>