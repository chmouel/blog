<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Update Emacs/VIM tags with inotify | Chmouel's blog</title>
<meta name=keywords content="Emacs"><meta name=description content="When you use the tags interface for Emacs or with VIM you have to generate your tag file everytime you have a new class or things get changed. Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.
With incron you have cron that can watch some portion of the filesystem and generate an action if certain event appears. So after installed (aptitude/urpmi) it I have configured this incrontab entry :"><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2009/07/03/update-emacsvim-tags-with-inotify/><link crossorigin=anonymous href=/assets/css/stylesheet.060b881d8893742854d02a3a291c4a2f70a6d0c12d733e455f6ceb190dfe5c6e.css integrity="sha256-BguIHYiTdChU0Co6KRxKL3Cm0MEtcz5FX2zrGQ3+XG4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Update Emacs/VIM tags with inotify"><meta property="og:description" content="When you use the tags interface for Emacs or with VIM you have to generate your tag file everytime you have a new class or things get changed. Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.
With incron you have cron that can watch some portion of the filesystem and generate an action if certain event appears. So after installed (aptitude/urpmi) it I have configured this incrontab entry :"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2009/07/03/update-emacsvim-tags-with-inotify/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-07-03T18:12:30+00:00"><meta property="article:modified_time" content="2009-07-03T18:12:30+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Update Emacs/VIM tags with inotify"><meta name=twitter:description content="When you use the tags interface for Emacs or with VIM you have to generate your tag file everytime you have a new class or things get changed. Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.
With incron you have cron that can watch some portion of the filesystem and generate an action if certain event appears. So after installed (aptitude/urpmi) it I have configured this incrontab entry :"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Update Emacs/VIM tags with inotify","item":"https://blog.chmouel.com/2009/07/03/update-emacsvim-tags-with-inotify/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Update Emacs/VIM tags with inotify","name":"Update Emacs\/VIM tags with inotify","description":"When you use the tags interface for Emacs or with VIM you have to generate your tag file everytime you have a new class or things get changed. Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.\nWith incron you have cron that can watch some portion of the filesystem and generate an action if certain event appears. So after installed (aptitude/urpmi) it I have configured this incrontab entry :","keywords":["Emacs"],"articleBody":"When you use the tags interface for Emacs or with VIM you have to generate your tag file everytime you have a new class or things get changed. Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.\nWith incron you have cron that can watch some portion of the filesystem and generate an action if certain event appears. So after installed (aptitude/urpmi) it I have configured this incrontab entry :\n/home/chmouel/git/myproject IN_CLOSE_WRITE /home/chmouel/update-ctags.sh py $@ $@/$# The script update-ctags.sh takes 3 argument one is the type of file to update when it’s changed it accept multipe of them if you delimit with a pipe ie: py|inc|php|c and the two others are identifier from incron to give the base directory and the full path which is something you should not have to change.\nThe update-ctags is simple as follow which could be hacked for your convenience :\n#!/bin/bash ACCEPTED_EXTENSION=\"$(echo $1|sed 's/|/ /g')\" BASE_DIR=$2 FILE_EXT=${3##*.} [[ -z ${FILE_EXT} ]] \u0026\u0026 exit processing= for extension in $ACCEPTED_EXTENSION;do [[ $extension == $FILE_EXT ]] \u0026\u0026 processing=true done find ${BASE_DIR} ! -wholename './.git/*' -a ! -wholename './.svn/*' -a ! -name '*.pyc' -a ! -name '*~' -a ! -name '*#' -print0| xargs -0 etags -o ${BASE_DIR}/TAGS 2\u003e/dev/null \u003e/dev/null ","wordCount":"211","inLanguage":"en","datePublished":"2009-07-03T18:12:30Z","dateModified":"2009-07-03T18:12:30Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2009/07/03/update-emacsvim-tags-with-inotify/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=GitHub><span>GitHub</span></a></li><li><a href=https://fosstodon.org/@chmouel title=Mastodon><span>Mastodon</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Update Emacs/VIM tags with inotify</h1><div class=post-meta><span title='2009-07-03 18:12:30 +0000 UTC'>July 3, 2009</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2009-07-03-update-emacsvim-tags-with-inotify.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>When you use the tags interface for <a href=http://www.emacswiki.org/emacs/EmacsTags>Emacs</a> or with <a href=http://www.vim.org/htmldoc/tagsrch.html#tags>VIM</a> you have to generate your tag file everytime you have a new class or things get changed.  Would not be cool to have inotify monitoring your project directory and run the etags command to generate it.</p><p>With <a href="http://inotify.aiken.cz/?section=incron&amp;page=doc&amp;lang=en">incron</a> you have cron that can watch some portion of the filesystem and generate an action if certain event appears.  So after installed (aptitude/urpmi) it I have configured this incrontab entry :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>/home/chmouel/git/myproject IN_CLOSE_WRITE /home/chmouel/update-ctags.sh py <span style=color:#8be9fd;font-style:italic>$@</span> <span style=color:#8be9fd;font-style:italic>$@</span>/<span style=color:#8be9fd;font-style:italic>$#</span>
</span></span></code></pre></div><p>The script update-ctags.sh takes 3 argument one is the type of file to update when it&rsquo;s changed it accept multipe of them if you delimit with a pipe ie: py|inc|php|c and the two others are identifier from incron to give the base directory and the full path which is something you should not have to change.</p><p>The update-ctags is simple as follow which could be hacked for your convenience :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff79c6>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#ff79c6></span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>ACCEPTED_EXTENSION</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;</span><span style=color:#ff79c6>$(</span><span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#8be9fd;font-style:italic>$1</span>|sed <span style=color:#f1fa8c>&#39;s/|/ /g&#39;</span><span style=color:#ff79c6>)</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>BASE_DIR</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>$2</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>FILE_EXT</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>3</span>##*.<span style=color:#f1fa8c>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[[</span> -z <span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>FILE_EXT</span><span style=color:#f1fa8c>}</span> <span style=color:#ff79c6>]]</span> <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>exit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>processing</span><span style=color:#ff79c6>=</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> extension in <span style=color:#8be9fd;font-style:italic>$ACCEPTED_EXTENSION</span>;<span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>[[</span> <span style=color:#8be9fd;font-style:italic>$extension</span> <span style=color:#ff79c6>==</span> <span style=color:#8be9fd;font-style:italic>$FILE_EXT</span> <span style=color:#ff79c6>]]</span> <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>processing</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>find <span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>BASE_DIR</span><span style=color:#f1fa8c>}</span> ! -wholename <span style=color:#f1fa8c>&#39;./.git/*&#39;</span>  -a ! -wholename <span style=color:#f1fa8c>&#39;./.svn/*&#39;</span> -a ! -name <span style=color:#f1fa8c>&#39;*.pyc&#39;</span> -a ! -name <span style=color:#f1fa8c>&#39;*~&#39;</span> -a ! -name <span style=color:#f1fa8c>&#39;*#&#39;</span> -print0| xargs -0 etags -o <span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>BASE_DIR</span><span style=color:#f1fa8c>}</span>/TAGS 2&gt;/dev/null &gt;/dev/null
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/emacs/>Emacs</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>