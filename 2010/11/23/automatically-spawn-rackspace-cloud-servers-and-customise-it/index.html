<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Automatically spawn Rackspace Cloud Servers and customise it. | Chmouel's blog</title><meta name=keywords content="Cloud,Rackspace"><meta name=description content="Lately I had to spawn some cloud servers and automatically customise them.
I have used the python-cloudservers library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):
pypi-install python-cloudservers From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me."><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2010/11/23/automatically-spawn-rackspace-cloud-servers-and-customise-it/><link crossorigin=anonymous href=/assets/css/stylesheet.6f7f13d3d67cfd883158e82d8eac85f5aed561afc99d35624ebeb913747e0ec5.css integrity="sha256-b38T09Z8/YgxWOgtjqyF9a7VYa/JnTViTr65E3R+DsU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Automatically spawn Rackspace Cloud Servers and customise it."><meta property="og:description" content="Lately I had to spawn some cloud servers and automatically customise them.
I have used the python-cloudservers library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):
pypi-install python-cloudservers From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2010/11/23/automatically-spawn-rackspace-cloud-servers-and-customise-it/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-11-23T12:36:00+00:00"><meta property="article:modified_time" content="2010-11-23T12:36:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automatically spawn Rackspace Cloud Servers and customise it."><meta name=twitter:description content="Lately I had to spawn some cloud servers and automatically customise them.
I have used the python-cloudservers library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):
pypi-install python-cloudservers From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Automatically spawn Rackspace Cloud Servers and customise it.","item":"https://blog.chmouel.com/2010/11/23/automatically-spawn-rackspace-cloud-servers-and-customise-it/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Automatically spawn Rackspace Cloud Servers and customise it.","name":"Automatically spawn Rackspace Cloud Servers and customise it.","description":"Lately I had to spawn some cloud servers and automatically customise them.\nI have used the python-cloudservers library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):\npypi-install python-cloudservers From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me.","keywords":["Cloud","Rackspace"],"articleBody":"Lately I had to spawn some cloud servers and automatically customise them.\nI have used the python-cloudservers library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):\npypi-install python-cloudservers From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me.\nIf you want to see all flavours you can do something like that from python command prompt\n:\nimport cloudservers cs = cloudservers.CloudServers(\"API_USERNAME\", \"API_PASSWORD\") for i in cs.flavors.list(): print \"ID: %s = %s\" % (i.id, i.name) which should output something like this at the time this article has\nbeen written :\nID: 1 - 256 server ID: 2 - 512 server ID: 3 - 1GB server ID: 4 - 2GB server ID: 5 - 4GB server ID: 6 - 8GB server ID: 7 - 15.5GB server You need to figure out the image type as well which is basically the Operating System, in this case I wanted Ubuntu Maverick which is 69. If you want to see all image type you can do :\nimport cloudservers cs = cloudservers.CloudServers(\"API_USERNAME\", \"API_PASSWORD\") for i in cs.images.list(): print \"ID: %s = %s\" % (i.id, i.name) which print something like this for me at this time :\nID: 29 = Windows Server 2003 R2 SP2 x86 ID: 69 = Ubuntu 10.10 (maverick) ID: 41 = Oracle EL JeOS Release 5 Update 3 ID: 40 = Oracle EL Server Release 5 Update 4 ID: 187811 = CentOS 5.4 ID: 4 = Debian 5.0 (lenny) ID: 10 = Ubuntu 8.04.2 LTS (hardy) ID: 23 = Windows Server 2003 R2 SP2 x64 ID: 24 = Windows Server 2008 SP2 x64 ID: 49 = Ubuntu 10.04 LTS (lucid) ID: 14362 = Ubuntu 9.10 (karmic) ID: 62 = Red Hat Enterprise Linux 5.5 ID: 53 = Fedora 13 ID: 17 = Fedora 12 ID: 71 = Fedora 14 ID: 31 = Windows Server 2008 SP2 x86 ID: 51 = CentOS 5.5 ID: 14 = Red Hat Enterprise Linux 5.4 ID: 19 = Gentoo 10.1 ID: 28 = Windows Server 2008 R2 x64 ID: 55 = Arch 2010.05 ID: 6719676 = Backup-Image Now to make stuff going automatic we send our ~/.ssh/id_rsa to ‘/root/.ssh/authorized_keys’ and assuming you have a properly\nconfigured ssh-agent which was already identified you have a passwordless access and you can launch command.\nI have a script that does basic customisations at :\nhttp://chmouel.com/pub/bootstrap.sh\nbut you get the idea from there to launch the command the way you want, you can as well scp and ssh it after if you wanted to have some non public stuff in the script.\nHere is the full script you need to adjust a few variable at the top of the file and customize it the way you want but that should get you started :\n","wordCount":"486","inLanguage":"en","datePublished":"2010-11-23T12:36:00Z","dateModified":"2010-11-23T12:36:00Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2010/11/23/automatically-spawn-rackspace-cloud-servers-and-customise-it/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><a href=https://redhat.com title=Work><span>Work</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Automatically spawn Rackspace Cloud Servers and customise it.</h1><div class=post-meta><span title='2010-11-23 12:36:00 +0000 UTC'>November 23, 2010</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2010-11-23-automatically-spawn-rackspace-cloud-servers-and-customise-it.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>Lately I had to spawn some cloud servers and automatically customise them.</p><p>I have used the <a href=https://github.com/jacobian/python-cloudservers>python-cloudservers</a> library and installed it automatically with pypi (works for Debian/Ubuntu you may want to check for other distros):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>pypi-install python-cloudservers
</span></span></code></pre></div><p>From there writing the script was pretty straight forward, I needed to know what type of CloudServers I wanted which in my case the smallest was good enough which is number 1 for me.</p><p>If you want to see all flavours you can do something like that from python command prompt<br>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>import</span> cloudservers
</span></span><span style=display:flex><span>cs <span style=color:#ff79c6>=</span> cloudservers<span style=color:#ff79c6>.</span>CloudServers(<span style=color:#f1fa8c>&#34;API_USERNAME&#34;</span>, <span style=color:#f1fa8c>&#34;API_PASSWORD&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> cs<span style=color:#ff79c6>.</span>flavors<span style=color:#ff79c6>.</span>list():
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span> <span style=color:#f1fa8c>&#34;ID: </span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c> = </span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>&#34;</span> <span style=color:#ff79c6>%</span> (i<span style=color:#ff79c6>.</span>id, i<span style=color:#ff79c6>.</span>name)
</span></span></code></pre></div><p>which should output something like this at the time this article has<br>been written :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>ID: 1 - 256 server
</span></span><span style=display:flex><span>ID: 2 - 512 server
</span></span><span style=display:flex><span>ID: 3 - 1GB server
</span></span><span style=display:flex><span>ID: 4 - 2GB server
</span></span><span style=display:flex><span>ID: 5 - 4GB server
</span></span><span style=display:flex><span>ID: 6 - 8GB server
</span></span><span style=display:flex><span>ID: 7 - 15.5GB server
</span></span></code></pre></div><p>You need to figure out the image type as well which is basically the Operating System, in this case I wanted Ubuntu Maverick which is 69. If you want to see all image type you can do :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>import</span> cloudservers
</span></span><span style=display:flex><span>cs <span style=color:#ff79c6>=</span> cloudservers<span style=color:#ff79c6>.</span>CloudServers(<span style=color:#f1fa8c>&#34;API_USERNAME&#34;</span>, <span style=color:#f1fa8c>&#34;API_PASSWORD&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> cs<span style=color:#ff79c6>.</span>images<span style=color:#ff79c6>.</span>list():
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>print</span> <span style=color:#f1fa8c>&#34;ID: </span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c> = </span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>&#34;</span> <span style=color:#ff79c6>%</span> (i<span style=color:#ff79c6>.</span>id, i<span style=color:#ff79c6>.</span>name)
</span></span></code></pre></div><p>which print something like this for me at this time :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>ID: 29 = Windows Server 2003 R2 SP2 x86
</span></span><span style=display:flex><span>ID: 69 = Ubuntu 10.10 (maverick)
</span></span><span style=display:flex><span>ID: 41 = Oracle EL JeOS Release 5 Update 3
</span></span><span style=display:flex><span>ID: 40 = Oracle EL Server Release 5 Update 4
</span></span><span style=display:flex><span>ID: 187811 = CentOS 5.4
</span></span><span style=display:flex><span>ID: 4 = Debian 5.0 (lenny)
</span></span><span style=display:flex><span>ID: 10 = Ubuntu 8.04.2 LTS (hardy)
</span></span><span style=display:flex><span>ID: 23 = Windows Server 2003 R2 SP2 x64
</span></span><span style=display:flex><span>ID: 24 = Windows Server 2008 SP2 x64
</span></span><span style=display:flex><span>ID: 49 = Ubuntu 10.04 LTS (lucid)
</span></span><span style=display:flex><span>ID: 14362 = Ubuntu 9.10 (karmic)
</span></span><span style=display:flex><span>ID: 62 = Red Hat Enterprise Linux 5.5
</span></span><span style=display:flex><span>ID: 53 = Fedora 13
</span></span><span style=display:flex><span>ID: 17 = Fedora 12
</span></span><span style=display:flex><span>ID: 71 = Fedora 14
</span></span><span style=display:flex><span>ID: 31 = Windows Server 2008 SP2 x86
</span></span><span style=display:flex><span>ID: 51 = CentOS 5.5
</span></span><span style=display:flex><span>ID: 14 = Red Hat Enterprise Linux 5.4
</span></span><span style=display:flex><span>ID: 19 = Gentoo 10.1
</span></span><span style=display:flex><span>ID: 28 = Windows Server 2008 R2 x64
</span></span><span style=display:flex><span>ID: 55 = Arch 2010.05
</span></span><span style=display:flex><span>ID: 6719676 = Backup-Image
</span></span></code></pre></div><p>Now to make stuff going automatic we send our ~/.ssh/id_rsa to &lsquo;/root/.ssh/authorized_keys&rsquo; and assuming you have a properly<br>configured ssh-agent which was already identified you have a passwordless access and you can launch command.</p><p>I have a script that does basic customisations at :</p><p><a href=http://chmouel.com/pub/bootstrap.sh>http://chmouel.com/pub/bootstrap.sh</a></p><p>but you get the idea from there to launch the command the way you want, you can as well scp and ssh it after if you wanted to have some non public stuff in the script.</p><p>Here is the full script you need to adjust a few variable at the top of the file and customize it the way you want but that should get you started :</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/cloud/>Cloud</a></li><li><a href=https://blog.chmouel.com/tags/rackspace/>Rackspace</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>