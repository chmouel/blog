<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Chmouel's blog</title><meta name=keywords content><meta name=description content="Posts - Chmouel's blog"><meta name=author content><link rel=canonical href=https://blog.chmouel.com/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.a9c88bf914eddfc67bc16f841b578c6482517a1a04279fdd6915a8b2641cda8b.css integrity="sha256-qciL+RTt38Z7wW+EG1eMZIJRehoEJ5/daRWosmQc2os=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.chmouel.com/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.chmouel.com/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><a href=https://redhat.com title=Work><span>Work</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>Error chaining with Rust and Go</h2></header><div class=entry-content><p>I was talking with a colleague about Rust and we were wondering (since we are both learning the language) how error handling compares to Go.
Chaining error in Go Go’s best practice when you want to chain multiple errors is to “wrap” them.
For example let’s say you have this function returning an error:
func do_something() err { value := "value" if value != "expected" { return fmt.Errorf("this was not expected") } } when we call the function do_something() from another function, we want to add context to it and to do so we will wrap it around it with the “%w” directive:...</p></div><footer class=entry-footer><span title='2022-05-20 09:54:31 +0200 +0200'>May 20, 2022</span></footer><a class=entry-link aria-label="post link to Error chaining with Rust and Go" href=https://blog.chmouel.com/posts/rust-errorhandling/></a></article><article class=post-entry><header class=entry-header><h2>Generating Preview Environments with Tekton</h2></header><div class=entry-content><p>On Pipelines as Code we started to get a nice documentation website on :
https://pipelinesascode.com
The website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.
So far that’s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs
There is a nice check box, that says “Generate Preview URL on Pull Request” which seems to do what we want but it doesn’t....</p></div><footer class=entry-footer><span title='2022-04-07 20:50:00 +0200 +0200'>April 7, 2022</span></footer><a class=entry-link aria-label="post link to Generating Preview Environments with Tekton" href=https://blog.chmouel.com/posts/generating-preview-environment-with-tekton/></a></article><article class=post-entry><header class=entry-header><h2>vtplug a very dumb and tiny zsh plugin manager</h2></header><div class=entry-content><p>There is a lot of zsh plugin manager around :
https://github.com/unixorn/awesome-zsh-plugins#frameworks
They all allow you to add cool new features to your shell easily and for authors to easily share their plugin with users and frameworks.
While a lot of people are probably using frameworks like oh-my-zsh which does everything for them with minimal setup.
But since I have been using zsh since much before than those frameworks existed, I always ran my custom config....</p></div><footer class=entry-footer><span title='2022-03-18 11:06:19 +0000 UTC'>March 18, 2022</span></footer><a class=entry-link aria-label="post link to vtplug a very dumb and tiny zsh plugin manager" href=https://blog.chmouel.com/2022/03/18/vtplug-a-very-dumb-and-tiny-zsh-plugin-manager/></a></article><article class=post-entry><header class=entry-header><h2>Show plugins list to a CLI when using go’s cobra library</h2></header><div class=entry-content><p>With the TektonCD CLI we have a system of “plugins”, it’s the same very simple CLI plugin system you have with git or kubectl, if you do a :
kubectl blah foo --bar
since kubectl knows it doesn’t have the blah command will try to go over the filesystem paths in your $PATH environment and sees if there is a binary called kubectl-blah and if it finds it will pass the arguments to the binary which effectively become :...</p></div><footer class=entry-footer><span title='2022-03-18 08:53:02 +0000 UTC'>March 18, 2022</span></footer><a class=entry-link aria-label="post link to Show plugins list to a CLI when using go’s cobra library" href=https://blog.chmouel.com/2022/03/18/show-plugins-list-to-a-cli-when-using-gos-cobra-library/></a></article><article class=post-entry><header class=entry-header><h2>Running tasks as non root on OpenShift Pipelines</h2></header><div class=entry-content><p>Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.
On OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.
That’s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges....</p></div><footer class=entry-footer><span title='2022-03-07 08:04:02 +0000 UTC'>March 7, 2022</span></footer><a class=entry-link aria-label="post link to Running tasks as non root on OpenShift Pipelines" href=https://blog.chmouel.com/2022/03/07/running-tasks-as-non-root-on-openshift-pipelines/></a></article><article class=post-entry><header class=entry-header><h2>User namespaces with Buildah and OpenShift Pipelines</h2></header><div class=entry-content><p>In 2022 one of the hottest topic around CI is how to secure it every steps along the way.
The so-called supply chain attacks have been more and more an attack vector for bad actor whereas providers need to make sure every piece of the Integration is secure.
One area that was identified as something we can improve with Openshift and containers in general is when running as root on the container may expose the host and process in that container may be able to mingle with other resources....</p></div><footer class=entry-footer><span title='2022-01-25 10:07:07 +0000 UTC'>January 25, 2022</span></footer><a class=entry-link aria-label="post link to User namespaces with Buildah and OpenShift Pipelines" href=https://blog.chmouel.com/2022/01/25/user-namespaces-with-buildah-and-openshift-pipelines/></a></article><article class=post-entry><header class=entry-header><h2>For the love of centered windows gnome extension edition</h2></header><div class=entry-content><p>Feels weird or great or stupid or pretty smart or whatever to be wrong. Just when I wrote that previous blog post : https://blog.chmouel.com/2021/11/14/for-the-love-of-centered-windows/ that I realize that shelll script doesn’t work great on wayland.
I didn’t really understood how Wayland works and just assumed that my tiny scripts just works. But experiencing not working on a native Wayland application and understanding how wayland works: https://wayland.freedesktop.org/docs/html/ch05.html it obviously needed a better way to do that if I have to keep up with the modern world of a linux desktop....</p></div><footer class=entry-footer><span title='2021-11-19 11:41:54 +0000 UTC'>November 19, 2021</span></footer><a class=entry-link aria-label="post link to For the love of centered windows gnome extension edition" href=https://blog.chmouel.com/2021/11/19/for-the-love-of-centered-windows-gnome-extension-edition/></a></article><article class=post-entry><header class=entry-header><h2>For the love of centered windows</h2></header><div class=entry-content><p>Sometime over a 2020 confinement my work decided to give us some money to buy some work from home office items.
I didn’t need much at that time since I was already settled with everything I needed in a work from home office but decided to go for a fancy new screen since well why not and the other one (a standard 24" display) could find some good use for my teenage gamer son....</p></div><footer class=entry-footer><span title='2021-11-14 06:36:06 +0000 UTC'>November 14, 2021</span></footer><a class=entry-link aria-label="post link to For the love of centered windows" href=https://blog.chmouel.com/2021/11/14/for-the-love-of-centered-windows/></a></article><article class=post-entry><header class=entry-header><h2>How to make a release pipeline with Pipelines as Code</h2></header><div class=entry-content><p>One of the early goal of Pipelines as Code on Tekton is to make sure we were able to have the project CI running with itself.
The common user case of validating pull request was quickly implemented and you can find more information about it in this walkthough video :
For slightly more advanced use case here is how we made a release pipeline for the project.
The goal is when we tag a release and push the tags to the GitHUB repo it will...</p></div><footer class=entry-footer><span title='2021-07-01 12:44:25 +0000 UTC'>July 1, 2021</span></footer><a class=entry-link aria-label="post link to How to make a release pipeline with Pipelines as Code" href=https://blog.chmouel.com/2021/07/01/how-to-make-a-release-pipeline-with-pipelines-as-code/></a></article><article class=post-entry><header class=entry-header><h2>Speed up your tekton pipeline caching the hacky way</h2></header><div class=entry-content><p>There is one thing that can get your wind up when you try to iterate quickly in a PR is to have a slow CI.
While working on a go project with a comprehensive test suite it was usually taking over 20 to 30 minutes to run and being as patient as a kid waiting for her candy floss to be ready I am eagerly waiting that my pipeline is Green or not....</p></div><footer class=entry-footer><span title='2021-05-25 08:51:33 +0000 UTC'>May 25, 2021</span></footer><a class=entry-link aria-label="post link to Speed up your tekton pipeline caching the hacky way" href=https://blog.chmouel.com/2021/05/25/speed-up-your-tekton-pipeline-caching-the-hacky-way/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://blog.chmouel.com/posts/page/2/>Next »</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>