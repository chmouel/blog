<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Generating Preview Environments with Tekton | Chmouel's blog</title><meta name=keywords content><meta name=description content="On Pipelines as Code we started to get a nice documentation website on :
https://pipelinesascode.com
The website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.
So far that&rsquo;s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs
There is a nice check box, that says &ldquo;Generate Preview URL on Pull Request&rdquo; which seems to do what we want but it doesn&rsquo;t."><meta name=author content><link rel=canonical href=https://blog.chmouel.com/posts/generating-preview-environment-with-tekton/><link crossorigin=anonymous href=/assets/css/stylesheet.9a18bcc7aea35356ff8ec585fcaf37f8ccd512596b0833c5577cc43f4517b13c.css integrity="sha256-mhi8x66jU1b/jsWF/K83+MzVEllrCDPFV3zEP0UXsTw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Generating Preview Environments with Tekton"><meta property="og:description" content="On Pipelines as Code we started to get a nice documentation website on :
https://pipelinesascode.com
The website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.
So far that&rsquo;s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs
There is a nice check box, that says &ldquo;Generate Preview URL on Pull Request&rdquo; which seems to do what we want but it doesn&rsquo;t."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/posts/generating-preview-environment-with-tekton/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-07T20:50:00+02:00"><meta property="article:modified_time" content="2022-04-07T20:50:00+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Generating Preview Environments with Tekton"><meta name=twitter:description content="On Pipelines as Code we started to get a nice documentation website on :
https://pipelinesascode.com
The website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.
So far that&rsquo;s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs
There is a nice check box, that says &ldquo;Generate Preview URL on Pull Request&rdquo; which seems to do what we want but it doesn&rsquo;t."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Generating Preview Environments with Tekton","item":"https://blog.chmouel.com/posts/generating-preview-environment-with-tekton/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Generating Preview Environments with Tekton","name":"Generating Preview Environments with Tekton","description":"On Pipelines as Code we started to get a nice documentation website on :\nhttps://pipelinesascode.com\nThe website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.\nSo far that\u0026rsquo;s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs\nThere is a nice check box, that says \u0026ldquo;Generate Preview URL on Pull Request\u0026rdquo; which seems to do what we want but it doesn\u0026rsquo;t.","keywords":[],"articleBody":"On Pipelines as Code we started to get a nice documentation website on :\nhttps://pipelinesascode.com\nThe website is statically generated with Hugo and hosted on CloudFares Pages using the markdown files from the repository.\nSo far that’s a pretty standard stack, but what we wanted is to be able to get preview URLS like on Netlify or other CIs\nThere is a nice check box, that says “Generate Preview URL on Pull Request” which seems to do what we want but it doesn’t. So far it seems that Pull Request coming from forks are not processed only the one from branch coming from the same repository where the pull request is.\nSince we do our own dogfood and we want anyway to use Pipelines as Code and Tekton as much as possible, I started to implement a preview environement mechanism to get a link with the changes from the pull request if the doc/ folder is modified inside the PR.\nI have again used my toy webserver, go-simple-uploader (which we have been used previously for artifacts caching) to serve the static HTML generate with hugo, but first I had to make a few changes to it:\nAdded an OpenShift Route to directly expose it to the internet. It previously was only accessible via the local kubernetes service across pods.\nI added a capability to be able to send a tarball when uploading, so we can upload a tarball of a folder and stream directly to go-simple-uploader which will uncompress it on the fly.\nI modified the server to add authentication to the /upload endpoint via a username and password. Just to make sure nobody abuse from it.\nSo far so good and after having the new image deployed on our cluster, I modified our Pipelines as Code/Tekton template in the .tekton directory to get those preview URLS generated.\nThe whole bits added is here :\n- name: build-doc runAfter: - fetchit taskSpec: workspaces: - name: source steps: - name: hugo-gen image: quay.io/thegeeklab/hugo workingDir: $(workspaces.source.path) script: | git fetch origin main \u0026\u0026 \\ git diff --name-only FETCH_HEAD | grep -q '^docs/' || exit 0 cd docs sed -i '1acanonifyURLs = true' config.toml hugo --gc --minify -d {{ revision }} -b https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }} echo \"Preview URL: https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }}\" - name: upload-to-static-server # it has curl and we already pulled it image: registry.redhat.io/rhel8/go-toolset:1.16.12-7 workingDir: $(workspaces.source.path) env: - name: HUB_TOKEN valueFrom: secretKeyRef: name: \"nightly-ci-github-hub-token\" key: \"hub-token\" - name: UPLOADER_UPLOAD_CREDENTIALS valueFrom: secretKeyRef: name: \"uploader-upload-credentials\" key: \"credentials\" script: | cd docs [[ -d {{ revision }} ]] || exit 0 tar czf - {{ revision }} | curl -u ${UPLOADER_UPLOAD_CREDENTIALS} -F path=docs -F targz=true -X POST -F file=@- http://uploader:8080/upload # Post as status set +x curl -H \"Authorization: Bearer ${HUB_TOKEN}\" -H 'Accept: application/vnd.github.v3+json' -X POST https://api.github.com/repos/{{repo_owner}}/{{repo_name}}/statuses/{{revision}} -d '{\"state\": \"success\", \"target_url\": \"https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }}\", \"description\": \"Generated with brio.\", \"context\": \"Pipelines as Code Preview URL\"}' On the first step we start detecting if we had any changes in the doc/ folder using some git trickery with FETCH_HEAD, if we didn’t have any we will just exit 0 and skip it.\nIf we have some changes, we add a setting to the hugo config.toml file to set cannonifyURLs=true so we get canon urls instead of relative.\nWe are then generating the documentation using hugo and we add the new base which goes to our public route URL and the commit sha (via Pipelines as Code variable expansion).\nWe have another step just after, that would use the username and password from a secret on a cluster and tar gz the new docs/ folder on the file to go-simple-uploader which will upload it and uncompress it on the service.\nAt the end to be able to preview URL, I wasn’t sure which place to put it, we could do slack or as a comment of the pull request but this quickly become ignore and spammy. Instead, I used the GitHub statuses API to post the link inside the pull request in the CI status place of GitHub, just a click away to be previewed.\nLinks Pipelines as Code Pipelines as Code pull request template Go Simple Uploader Screenshot ","wordCount":"690","inLanguage":"en","datePublished":"2022-04-07T20:50:00+02:00","dateModified":"2022-04-07T20:50:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/posts/generating-preview-environment-with-tekton/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><a href=https://redhat.com title=Work><span>Work</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Generating Preview Environments with Tekton</h1><div class=post-meta><span title='2022-04-07 20:50:00 +0200 +0200'>April 7, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/generating-preview-environment-with-tekton.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>On <a href=htps://github.com/openshift-pipelines/pipelines-as-code>Pipelines as
Code</a> we started to
get a nice documentation website on :</p><p><a href=https://pipelinesascode.com>https://pipelinesascode.com</a></p><p>The website is statically generated with
<a href=https://gohugo.io/>Hugo</a> and hosted on <a href=https://pages.cloudfare.com>CloudFares
Pages</a> using the markdown files from the
repository.</p><p>So far that&rsquo;s a pretty standard stack, but what we wanted is to be able to get
preview URLS like on <a href=https://docs.netlify.com/site-deploys/deploy-previews/>Netlify</a>
or other <a href=https://docs.gitlab.com/ee/ci/review_apps/>CI</a>s</p><p>There is a nice check box, that says &ldquo;Generate Preview URL on Pull Request&rdquo;
which seems to do what we want but it doesn&rsquo;t. So far it seems that <code>Pull Request</code> coming from forks are not processed only the one from branch coming
from the same repository where the pull request is.</p><p>Since we do our own dogfood and we want anyway to use <code>Pipelines as Code</code> and
<code>Tekton</code> as much as possible, I started to implement a preview environement
mechanism to get a link with the changes from the pull request if the <code>doc/</code>
folder is modified inside the PR.</p><p>I have again used my toy webserver,
<a href=https://github.com/chmouel/go-simple-uploader>go-simple-uploader</a> (which we
have been used previously for artifacts caching) to serve the static HTML
generate with hugo, but first I had to make a few changes to it:</p><ul><li><p>Added an OpenShift Route to directly expose it to the internet. It previously
was only accessible via the local kubernetes service across pods.</p></li><li><p>I added a capability to be able to send a tarball when uploading, so we can
upload a tarball of a folder and stream directly to <code>go-simple-uploader</code>
which will uncompress it on the fly.</p></li><li><p>I modified the server to add authentication to the <code>/upload</code> endpoint via a
username and password. Just to make sure nobody abuse from it.</p></li></ul><p>So far so good and after having the new image deployed on our cluster, I
modified our <code>Pipelines as Code</code>/<code>Tekton</code> template in the <code>.tekton</code> directory
to get those preview URLS generated.</p><p>The whole bits added is here :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>      - <span style=color:#ff79c6>name</span>: build-doc
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>runAfter</span>:
</span></span><span style=display:flex><span>          - fetchit
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>taskSpec</span>:
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>workspaces</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ff79c6>name</span>: source
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>steps</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ff79c6>name</span>: hugo-gen
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>image</span>: quay.io/thegeeklab/hugo
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>workingDir</span>: $(workspaces.source.path)
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>script</span>: |<span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                git fetch origin main &amp;&amp; \
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                  git diff --name-only FETCH_HEAD | grep -q &#39;^docs/&#39; || exit 0
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                cd docs
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                sed -i &#39;1acanonifyURLs = true&#39; config.toml
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                hugo --gc --minify -d {{ revision }} -b https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }}
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                echo &#34;Preview URL: https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }}&#34;</span>                
</span></span><span style=display:flex><span>            - <span style=color:#ff79c6>name</span>: upload-to-static-server
</span></span><span style=display:flex><span>              <span style=color:#6272a4># it has curl and we already pulled it</span>
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>image</span>: registry.redhat.io/rhel8/go-toolset:1.16.12-7
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>workingDir</span>: $(workspaces.source.path)
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>env</span>:
</span></span><span style=display:flex><span>                - <span style=color:#ff79c6>name</span>: HUB_TOKEN
</span></span><span style=display:flex><span>                  <span style=color:#ff79c6>valueFrom</span>:
</span></span><span style=display:flex><span>                    <span style=color:#ff79c6>secretKeyRef</span>:
</span></span><span style=display:flex><span>                      <span style=color:#ff79c6>name</span>: <span style=color:#f1fa8c>&#34;nightly-ci-github-hub-token&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#ff79c6>key</span>: <span style=color:#f1fa8c>&#34;hub-token&#34;</span>
</span></span><span style=display:flex><span>                - <span style=color:#ff79c6>name</span>: UPLOADER_UPLOAD_CREDENTIALS
</span></span><span style=display:flex><span>                  <span style=color:#ff79c6>valueFrom</span>:
</span></span><span style=display:flex><span>                    <span style=color:#ff79c6>secretKeyRef</span>:
</span></span><span style=display:flex><span>                      <span style=color:#ff79c6>name</span>: <span style=color:#f1fa8c>&#34;uploader-upload-credentials&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#ff79c6>key</span>: <span style=color:#f1fa8c>&#34;credentials&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>script</span>: |<span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                cd docs
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                [[ -d {{ revision }} ]]  || exit 0
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                tar czf - {{ revision }} | curl -u ${UPLOADER_UPLOAD_CREDENTIALS} -F path=docs -F targz=true -X POST -F file=@- http://uploader:8080/upload
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                # Post as status
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                set +x
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>                curl -H &#34;Authorization: Bearer ${HUB_TOKEN}&#34; -H &#39;Accept: application/vnd.github.v3+json&#39; -X POST https://api.github.com/repos/{{repo_owner}}/{{repo_name}}/statuses/{{revision}} -d &#39;{&#34;state&#34;: &#34;success&#34;, &#34;target_url&#34;: &#34;https://preview-pipelines-as-code-ci.apps.paac.devcluster.openshift.com/docs/{{ revision }}&#34;, &#34;description&#34;: &#34;Generated with brio.&#34;, &#34;context&#34;: &#34;Pipelines as Code Preview URL&#34;}&#39;</span>                
</span></span></code></pre></div><p>On the first step we start detecting if we had any changes in the <code>doc/</code> folder
using some git trickery with <code>FETCH_HEAD</code>, if we didn&rsquo;t have any we will just
<code>exit 0</code> and skip it.</p><p>If we have some changes, we add a setting to the hugo <code>config.toml</code> file to set
<code>cannonifyURLs=true</code> so we get canon urls instead of relative.</p><p>We are then generating the documentation using <code>hugo</code> and we add the new base
which goes to our public <code>route</code> URL and the commit sha (via <code>Pipelines as Code</code> variable expansion).</p><p>We have another step just after, that would use the username and password from
a secret on a cluster and tar gz the new <code>docs/</code> folder on the file to
<code>go-simple-uploader</code> which will upload it and uncompress it on the service.</p><p>At the end to be able to preview URL, I wasn&rsquo;t sure which place to put it, we
could do slack or as a comment of the pull request but this quickly become
ignore and spammy. Instead, I used the GitHub <code>statuses</code> API to post the link
inside the pull request in the CI status place of GitHub, just a click away to
be previewed.</p><h3 id=links>Links<a hidden class=anchor aria-hidden=true href=#links>#</a></h3><ul><li><a href=https://github.com/openshift-pipelines/pipelines-as-code>Pipelines as Code</a></li><li><a href=https://github.com/openshift-pipelines/pipelines-as-code/blob/main/.tekton/pull-request.yaml>Pipelines as Code pull request template</a></li><li><a href=https://github.com/chmouel/go-simple-uploader>Go Simple Uploader</a></li></ul><h2 id=screenshot>Screenshot<a hidden class=anchor aria-hidden=true href=#screenshot>#</a></h2><p><img loading=lazy src=../../images/previewurl.png alt="Preview URL on CI"></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>