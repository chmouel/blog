<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Scripts | Chmouel's blog</title><meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://blog.chmouel.com/tags/scripts/><link crossorigin=anonymous href=/assets/css/stylesheet.9e486942e3e80b89dff7d0f59b9b383012cb07a9852441596bc21b3168df44a8.css integrity="sha256-nkhpQuPoC4nf99D1m5s4MBLLB6mFJEFZa8IbMWjfRKg=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.chmouel.com/tags/scripts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Scripts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.chmouel.com/tags/scripts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Scripts"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><a href=https://redhat.com title=Work><span>Work</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><header class=page-header><h1>Scripts</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>The trick to get your wordpress behind a reverse proxy</h2></header><div class=entry-content><p>I have been meaning to get this blog SSL protected for a while and since solution like letsencrypt makes it easy I have generated some SSL keys for my domain and configured it in apache.
So far so good, but the thing is my VM at my hosting provider is pretty small and I have been using varnish for quite some time or I would get out of memory quickly some the kernel OOM killer kicking1 it....</p></div><footer class=entry-footer><span title='2016-09-22 10:27:27 +0000 UTC'>September 22, 2016</span></footer><a class=entry-link aria-label="post link to The trick to get your wordpress behind a reverse proxy" href=https://blog.chmouel.com/2016/09/22/the-trick-to-get-your-wordpress-behind-a-reverse-proxy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Upload to Rackspace Cloud Files in a shell script</h2></header><div class=entry-content><p>I don’t really use much the GUI and always the command line so I don’t really use the Cloud File plugin I created for nautilus.
So here is a shell script to upload to Rackspace Cloud Files and give you back a shortened URL of the public URL file. Great for quick sharing… You have to install the zenity binary first..
[Update: this is now available here https://github.com/chmouel/upcs]</p></div><footer class=entry-footer><span title='2010-06-09 18:56:54 +0000 UTC'>June 9, 2010</span></footer><a class=entry-link aria-label="post link to Upload to Rackspace Cloud Files in a shell script" href=https://blog.chmouel.com/2010/06/09/upload-to-rackspace-cloud-files-in-a-shell-script/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Unit conversion from zsh</h2></header><div class=entry-content><p>Quick conversion from shell :</p></div><footer class=entry-footer><span title='2010-06-06 17:58:31 +0000 UTC'>June 6, 2010</span></footer><a class=entry-link aria-label="post link to Unit conversion from zsh" href=https://blog.chmouel.com/2010/06/06/unit-conversion-from-zsh/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>rsync like backup to Rackspace Cloud File with duplicity</h2></header><div class=entry-content><p>It seems that there is no much documentation about how to do rsync like backup with duplicty so here it is :
Install python-cloudfiles from here http://github.com/rackspace/python-cloudfiles This should take care to upload the backup files to the backup container. It does that incrementally and detect the changes to your file system to upload. There is much more option for duplicity look at the manpage for more info.</p></div><footer class=entry-footer><span title='2009-09-02 20:09:15 +0000 UTC'>September 2, 2009</span></footer><a class=entry-link aria-label="post link to rsync like backup to Rackspace Cloud File with duplicity" href=https://blog.chmouel.com/2009/09/02/rsync-like-backup-to-rackspace-cloud-file-with-duplicity/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Upload to Rackspace Cloud files from GNOME nautilus</h2></header><div class=entry-content><p>After seeing this script http://overhrd.com/?p=106 which allow to upload files with the file manager (finder) of MacosX to Rackspace Cloud Files, I have made a nautilus script that doe the same for us Gnome/Unix users.
Available here :
http://github.com/chmouel/nautilus-rackspace-cloud-file/tree/master</p></div><footer class=entry-footer><span title='2009-09-02 16:49:30 +0000 UTC'>September 2, 2009</span></footer><a class=entry-link aria-label="post link to Upload to Rackspace Cloud files from GNOME nautilus" href=https://blog.chmouel.com/2009/09/02/upload-to-rackspace-cloud-files-from-gnome-nautilus/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Using ProxyCommand with OpenSSH and a Bastion server.</h2></header><div class=entry-content><p>So at work we have to use a bastion host for all our connections to servers to be able to get called PCI compliant. This kind of stuff could be a pain to use when you have to use another host to do RSYNC/SCP or other stuff that need direct transfer to workstation.
Thankfully OpenSSH is very flexible and have multiple options to easy the pain. If you add this to your ~/....</p></div><footer class=entry-footer><span title='2009-02-08 12:21:38 +0000 UTC'>February 8, 2009</span></footer><a class=entry-link aria-label="post link to Using ProxyCommand with OpenSSH and a Bastion server." href=https://blog.chmouel.com/2009/02/08/proxycommand-ssh-bastion-proxy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Generating md5 encrypted password for chpasswd</h2></header><div class=entry-content><p>If you want to generate properly encrypted password to feed to chpasswd, the most easier and proper way is to do that from command line :
[code lang=“bash”]
echo “encryptedpassword”|openssl passwd -1 -stdin
[/code]
If you want to generate in pure python you can do it like that :
[code lang=“python”]
def md5crypt(password, salt, magic=’$1$’):
import md5
m = md5.new()
m.update(password + magic + salt)
# /* Then just as many characters of the MD5(pw,salt,pw) */...</p></div><footer class=entry-footer><span title='2007-08-17 07:11:38 +0000 UTC'>August 17, 2007</span></footer><a class=entry-link aria-label="post link to Generating md5 encrypted password for chpasswd" href=https://blog.chmouel.com/2007/08/17/generating-md5-encrypted-password-for-chpasswd/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Automatic best resolution with xrandr</h2></header><div class=entry-content><p>If you like me you have a big screen with your laptop and wants to automate when your X session start to get the best resolution, you can use that script :
[code lang=“bash”]
#!/bin/bash
function get_resolutions() {
xrandr|while read -a line;do
RES="${line[1]}x${line[3]} "
[[ ${RES} != [0-9]* ]] && continue
echo ${RES}
done
}
_BEST_RES=0
BEST_RES=
for res in $(get_resolutions);do
_res=${res/x/}
[[ $_res -ge ${_BEST_RES} ]] && {
BEST_RES=${res}...</p></div><footer class=entry-footer><span title='2007-07-31 22:23:32 +0000 UTC'>July 31, 2007</span></footer><a class=entry-link aria-label="post link to Automatic best resolution with xrandr" href=https://blog.chmouel.com/2007/07/31/automatic-best-resolution-with-xrandr/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Automate SSH known_hosts cleanup</h2></header><div class=entry-content><p>If you like me, you have to do a lot of installs1 of the same test machine with the same IP and have to ssh it you will notice this annoying message :
I have automated the cleanup by a script :
[code lang=“bash”]
#!/bin/bash
H=$1
[[ -z ${H} ]] && { echo “Need a host as argument”; exit 1 ;}
LINE=$(ssh -o StrictHostKeyChecking=yes $1 ’exit’ 2>&1 | sed -n ‘/Offending key/ { s/....</p></div><footer class=entry-footer><span title='2007-05-30 22:33:40 +0000 UTC'>May 30, 2007</span></footer><a class=entry-link aria-label="post link to Automate SSH known_hosts cleanup" href=https://blog.chmouel.com/2007/05/30/automate-ssh-known_hosts-cleanup/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>SVN Diff against changes in the remote repository.</h2></header><div class=entry-content><p>A useful svn wrapper scripts. Get a diff of your local repostitory against the upstream repository changes. I wonder why it is not builtins though like a svn status -u but for dif.</p></div><footer class=entry-footer><span title='2007-02-07 03:02:26 +0000 UTC'>February 7, 2007</span></footer><a class=entry-link aria-label="post link to SVN Diff against changes in the remote repository." href=https://blog.chmouel.com/2007/02/06/svn-diff-against-changes-in-the-remote-repository/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://blog.chmouel.com/tags/scripts/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>