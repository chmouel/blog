<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Yum Force Exclude List | Chmouel's blog</title><meta name=keywords content="Programming,Python,RedHat"><meta name=description content="While talking with my fellow colleague Darren Birkett about what seems a design limitation
of yum to not be able to force listing the excludes from yum. I had a
shoot to make a yum plugin to force listing the excludes.
Here is how it works :
 root@centos5:~> grep exclude /etc/yum.conf
exclude=rpm*
root@centos5:~> yum install rpm-devel
Loading &ldquo;installonlyn&rdquo; plugin
Loading &ldquo;changelog&rdquo; plugin
Loading &ldquo;chmouel&rdquo; plugin
Loading &ldquo;priorities&rdquo; plugin
Setting up Install Process"><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2008/03/20/yum-force-exclude-list/><link crossorigin=anonymous href=/assets/css/stylesheet.min.286ffbab1cfdcf5c35ec0edbfc67759192b408de6939c558bbd4a964ca89f552.css integrity="sha256-KG/7qxz9z1w17A7b/Gd1kZK0CN5pOcVYu9SpZMqJ9VI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Yum Force Exclude List"><meta property="og:description" content="While talking with my fellow colleague Darren Birkett about what seems a design limitation
of yum to not be able to force listing the excludes from yum. I had a
shoot to make a yum plugin to force listing the excludes.
Here is how it works :
 root@centos5:~> grep exclude /etc/yum.conf
exclude=rpm*
root@centos5:~> yum install rpm-devel
Loading &ldquo;installonlyn&rdquo; plugin
Loading &ldquo;changelog&rdquo; plugin
Loading &ldquo;chmouel&rdquo; plugin
Loading &ldquo;priorities&rdquo; plugin
Setting up Install Process"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2008/03/20/yum-force-exclude-list/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2008-03-20T09:36:06+00:00"><meta property="article:modified_time" content="2008-03-20T09:36:06+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Yum Force Exclude List"><meta name=twitter:description content="While talking with my fellow colleague Darren Birkett about what seems a design limitation
of yum to not be able to force listing the excludes from yum. I had a
shoot to make a yum plugin to force listing the excludes.
Here is how it works :
 root@centos5:~> grep exclude /etc/yum.conf
exclude=rpm*
root@centos5:~> yum install rpm-devel
Loading &ldquo;installonlyn&rdquo; plugin
Loading &ldquo;changelog&rdquo; plugin
Loading &ldquo;chmouel&rdquo; plugin
Loading &ldquo;priorities&rdquo; plugin
Setting up Install Process"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Yum Force Exclude List","item":"https://blog.chmouel.com/2008/03/20/yum-force-exclude-list/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Yum Force Exclude List","name":"Yum Force Exclude List","description":"While talking with my fellow colleague Darren Birkett about what seems a design limitation\nof yum to not be able to force listing the excludes from yum. I had a\nshoot to make a yum plugin to force listing the excludes.\nHere is how it works :\n root@centos5:~\u0026gt; grep exclude /etc/yum.conf\nexclude=rpm*\nroot@centos5:~\u0026gt; yum install rpm-devel\nLoading \u0026ldquo;installonlyn\u0026rdquo; plugin\nLoading \u0026ldquo;changelog\u0026rdquo; plugin\nLoading \u0026ldquo;chmouel\u0026rdquo; plugin\nLoading \u0026ldquo;priorities\u0026rdquo; plugin\nSetting up Install Process","keywords":["Programming","Python","RedHat"],"articleBody":"While talking with my fellow colleague Darren Birkett about what seems a design limitation\nof yum to not be able to force listing the excludes from yum. I had a\nshoot to make a yum plugin to force listing the excludes.\nHere is how it works :\n root@centos5:~ grep exclude /etc/yum.conf\nexclude=rpm*\nroot@centos5:~ yum install rpm-devel\nLoading “installonlyn” plugin\nLoading “changelog” plugin\nLoading “chmouel” plugin\nLoading “priorities” plugin\nSetting up Install Process\nSetting up repositories\nReading repository metadata in from local files\nExcluding Packages in global exclude list\nFinished\n0 packages excluded due to repository priority protections\nParsing package install arguments\nNothing to do\n rpm* is excluded, but if we use the environment variable FORCE_EXCLUDE\nit will force it.\n  root@centos5:~ FORCE_EXCLUDE=true yum install rpm-devel\nLoading “installonlyn” plugin\nLoading “changelog” plugin\nLoading “chmouel” plugin\nLoading “priorities” plugin\nSetting up Install Process\nSetting up repositories\nReading repository metadata in from local files\n0 packages excluded due to repository priority protections\nParsing package install arguments\nResolving Dependencies\n– Populating transaction set with selected packages. Please wait.\n-– Downloading header for rpm-devel to pack into transaction set.\nrpm-devel-4.4.2-47.el5.i3 100% |=========================| 17 kB 00:00\n-– Package rpm-devel.i386 0:4.4.2-47.el5 set to be updated\n– Running transaction check\n[…..]\n It will allow you to list the excluded rpm as well :\n  root@centos5:~ FORCE_EXCLUDE=true yum list|grep rpm\nrpm.i386 4.4.2-47.el5 installed\nrpm-libs.i386 4.4.2-47.el5 installed\nrpm-python.i386 4.4.2-47.el5 installed\nredhat-rpm-config.noarch 8.0.45-22.el5.centos base\nrpm-build.i386 4.4.2-47.el5 base\nrpm-devel.i386 4.4.2-47.el5 base\nroot@centos5:~ yum list|grep rpm\nrpm.i386 4.4.2-47.el5 installed\nrpm-libs.i386 4.4.2-47.el5 installed\nrpm-python.i386 4.4.2-47.el5 installed\nredhat-rpm-config.noarch 8.0.45-22.el5.centos base\n See the README.txt in the rpm file to see how to use/install it.\nYou can download the rpm here and the src.rpm here\n  ","wordCount":"276","inLanguage":"en","datePublished":"2008-03-20T09:36:06Z","dateModified":"2008-03-20T09:36:06Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2008/03/20/yum-force-exclude-list/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Yum Force Exclude List</h1><div class=post-meta><span title="2008-03-20 09:36:06 +0000 UTC">March 20, 2008</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2008-03-20-yum-force-exclude-list.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>While talking with my fellow colleague Darren Birkett about what seems a design limitation<br>of yum to not be able to force listing the excludes from yum. I had a<br>shoot to make a yum plugin to force listing the excludes.</p><p>Here is how it works :</p><blockquote><p>root@centos5:~> grep exclude /etc/yum.conf<br>exclude=rpm*<br>root@centos5:~> yum install rpm-devel<br>Loading &ldquo;installonlyn&rdquo; plugin<br>Loading &ldquo;changelog&rdquo; plugin<br>Loading &ldquo;chmouel&rdquo; plugin<br>Loading &ldquo;priorities&rdquo; plugin<br>Setting up Install Process<br>Setting up repositories<br>Reading repository metadata in from local files<br>Excluding Packages in global exclude list<br>Finished<br>0 packages excluded due to repository priority protections<br>Parsing package install arguments<br>Nothing to do</p></blockquote><p>rpm* is excluded, but if we use the environment variable <strong>FORCE_EXCLUDE</strong><br>it will force it.</p><blockquote><p> root@centos5:~> FORCE_EXCLUDE=true yum install rpm-devel<br>Loading &ldquo;installonlyn&rdquo; plugin<br>Loading &ldquo;changelog&rdquo; plugin<br>Loading &ldquo;chmouel&rdquo; plugin<br>Loading &ldquo;priorities&rdquo; plugin<br>Setting up Install Process<br>Setting up repositories<br>Reading repository metadata in from local files<br>0 packages excluded due to repository priority protections<br>Parsing package install arguments<br>Resolving Dependencies<br>&ndash;> Populating transaction set with selected packages. Please wait.<br>-&ndash;> Downloading header for rpm-devel to pack into transaction set.<br>rpm-devel-4.4.2-47.el5.i3 100% |=========================| 17 kB 00:00<br>-&ndash;> Package rpm-devel.i386 0:4.4.2-47.el5 set to be updated<br>&ndash;> Running transaction check<br>[&mldr;..]</p></blockquote><p>It will allow you to list the excluded rpm as well :</p><blockquote><p> root@centos5:~> FORCE_EXCLUDE=true yum list|grep rpm<br>rpm.i386 4.4.2-47.el5 installed<br>rpm-libs.i386 4.4.2-47.el5 installed<br>rpm-python.i386 4.4.2-47.el5 installed<br>redhat-rpm-config.noarch 8.0.45-22.el5.centos base<br>rpm-build.i386 4.4.2-47.el5 base<br>rpm-devel.i386 4.4.2-47.el5 base<br>root@centos5:~> yum list|grep rpm<br>rpm.i386 4.4.2-47.el5 installed<br>rpm-libs.i386 4.4.2-47.el5 installed<br>rpm-python.i386 4.4.2-47.el5 installed<br>redhat-rpm-config.noarch 8.0.45-22.el5.centos base</p></blockquote><p>See the README.txt in the rpm file to see how to use/install it.</p><p>You can download the rpm <a href=http://www.chmouel.com/blog/wp-content/uploads/2008/03/yum-forceexclude-02-1noarch.rpm title="Yum Force Exclude Plugin">here</a> and the src.rpm <a href=http://www.chmouel.com/blog/wp-content/uploads/2008/03/yum-forceexclude-02-1src.rpm title="Yum Force Exclude Plugin src.rpm">here</a></p><blockquote></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/programming/>Programming</a></li><li><a href=https://blog.chmouel.com/tags/python/>Python</a></li><li><a href=https://blog.chmouel.com/tags/redhat/>RedHat</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>