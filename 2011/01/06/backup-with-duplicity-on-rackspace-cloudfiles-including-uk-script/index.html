<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Backup with duplicity on Rackspace CloudFiles (including UK) script. | Chmouel's blog</title>
<meta name=keywords content="Cloud,Rackspace"><meta name=description content="It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :
export CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0
and it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install)."><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2011/01/06/backup-with-duplicity-on-rackspace-cloudfiles-including-uk-script/><link crossorigin=anonymous href=/assets/css/stylesheet.060b881d8893742854d02a3a291c4a2f70a6d0c12d733e455f6ceb190dfe5c6e.css integrity="sha256-BguIHYiTdChU0Co6KRxKL3Cm0MEtcz5FX2zrGQ3+XG4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Backup with duplicity on Rackspace CloudFiles (including UK) script."><meta property="og:description" content="It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :
export CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0
and it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install)."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2011/01/06/backup-with-duplicity-on-rackspace-cloudfiles-including-uk-script/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-01-06T00:21:34+00:00"><meta property="article:modified_time" content="2011-01-06T00:21:34+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Backup with duplicity on Rackspace CloudFiles (including UK) script."><meta name=twitter:description content="It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :
export CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0
and it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Backup with duplicity on Rackspace CloudFiles (including UK) script.","item":"https://blog.chmouel.com/2011/01/06/backup-with-duplicity-on-rackspace-cloudfiles-including-uk-script/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Backup with duplicity on Rackspace CloudFiles (including UK) script.","name":"Backup with duplicity on Rackspace CloudFiles (including UK) script.","description":"It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :\nexport CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0\nand it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install).","keywords":["Cloud","Rackspace"],"articleBody":"It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :\nexport CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0\nand it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install).\nTo make things easier I have taken this script from :\nhttp://damontimm.com/code/dt-s3-backup\nand adapted it to make it work with Rackspace Cloud Files.\nThis is available here :\nhttps://github.com/chmouel/dt-cf-backup\nYou need to make sure that you have python-cloudfiles installed, on a Debian or Ubuntu system you can do it like this :\nsudo apt-get -y install python-stdeb sudo pypi-install python-cloudfiles Check the documentation of your Operating System to install python-cloudfiles, usually it is very easy to do it via pip (pip install python-cloudfiles)\nWhen you have installed duplicity and checkout the script (see the github page for documentation how to do it) you can start configuring it.\nAt the top there is a detailled explanation of the different variables that need to be configured. You can change it in the script or you can have them configured in an external configuration file in your home directory called ~/.dt-cf-backup.conf, this is an example :\nexport CLOUDFILES_USERNAME=\"MY_USERNAME\" export CLOUDFILES_APIKEY=\"MY_APIKEY\" export PASSPHRASE=\"MY_PASSPHRASE\" GPG_KEY=\"8D643162\" ROOT=\"/home/chmouel\" export DEST=\"cf+http://duplicity_backup\" INCLIST=( /home/chmouel/ ) EXCLIST=( \"/home/chmouel/tmp\" \"/**.DS_Store\" \"/**Icon?\" \"/**.AppleDouble\" ) LOGDIR=\"/tmp/\" LOG_FILE_OWNER=\"chmouel:\" You can then just run :\n./dt-cf-backup.sh --backup to do your backup.\nThere is much more documentation in the README.txt.\nI just would like to thanks again the author of dt-s3-backup for this script. I have just made a few modifications for Rackspace Cloud Files.\n","wordCount":"294","inLanguage":"en","datePublished":"2011-01-06T00:21:34Z","dateModified":"2011-01-06T00:21:34Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2011/01/06/backup-with-duplicity-on-rackspace-cloudfiles-including-uk-script/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://fosstodon.org/@chmouel title=Mastodon><span>Mastodon</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Backup with duplicity on Rackspace CloudFiles (including UK) script.</h1><div class=post-meta><span title='2011-01-06 00:21:34 +0000 UTC'>January 6, 2011</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2011-01-06-backup-with-duplicity-on-rackspace-cloudfiles-including-uk-script.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><p>It seems that my post about using duplicity to backup your data on Rackspace CloudFiles got popular and people may be interested to use with the newly (Beta) released Rackspace Cloud UK. You would just need to have a environnement exported at the top of your backup script like this :</p><p>export CLOUDFILES_AUTHURL=https://lon.auth.api.rackspacecloud.com/v1.0</p><p>and it will use the UK auth server (the same goes for OpenStack auth server if you have your own Swift install).</p><p>To make things easier I have taken this script from :</p><p><a href=http://damontimm.com/code/dt-s3-backup>http://damontimm.com/code/dt-s3-backup<br></a><br>and adapted it to make it work with Rackspace Cloud Files.</p><p>This is available here :</p><p><a href=https://github.com/chmouel/dt-cf-backup>https://github.com/chmouel/dt-cf-backup<br></a><br>You need to make sure that you have python-cloudfiles installed, on a Debian or Ubuntu system you can do it like this :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt-get -y install python-stdeb 
</span></span><span style=display:flex><span>sudo pypi-install python-cloudfiles
</span></span></code></pre></div><p>Check the documentation of your Operating System to install python-cloudfiles, usually it is very easy to do it via <a href=http://pip.openplans.org/>pip</a> (pip install python-cloudfiles)</p><p>When you have installed duplicity and checkout the script (see the github page for documentation how to do it) you can start configuring it.</p><p>At the top there is a detailled explanation of the different variables that need to be configured. You can change it in the script or you can have them configured in an external configuration file in your home directory called ~/.dt-cf-backup.conf, this is an example :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>CLOUDFILES_USERNAME</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;MY_USERNAME&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>CLOUDFILES_APIKEY</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;MY_APIKEY&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>PASSPHRASE</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;MY_PASSPHRASE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>GPG_KEY</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;8D643162&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>ROOT</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/home/chmouel&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>DEST</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;cf+http://duplicity_backup&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>INCLIST</span><span style=color:#ff79c6>=(</span> /home/chmouel/ <span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>EXCLIST</span><span style=color:#ff79c6>=(</span> 	 <span style=color:#f1fa8c>&#34;/home/chmouel/tmp&#34;</span>    <span style=color:#f1fa8c>&#34;/**.DS_Store&#34;</span> <span style=color:#f1fa8c>&#34;/**Icon?&#34;</span> <span style=color:#f1fa8c>&#34;/**.AppleDouble&#34;</span>  <span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>LOGDIR</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/tmp/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>LOG_FILE_OWNER</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;chmouel:&#34;</span>
</span></span></code></pre></div><p>You can then just run :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>./dt-cf-backup.sh --backup  
</span></span></code></pre></div><p>to do your backup.</p><p>There is much more documentation in the <a href=https://github.com/chmouel/dt-cf-backup/blob/master/README>README.txt.</a></p><p>I just would like to thanks again the author of dt-s3-backup for this script. I have just made a few modifications for Rackspace Cloud Files.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/cloud/>Cloud</a></li><li><a href=https://blog.chmouel.com/tags/rackspace/>Rackspace</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>