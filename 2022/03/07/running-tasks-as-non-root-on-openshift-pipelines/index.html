<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Running tasks as non root on OpenShift Pipelines | Chmouel's blog</title><meta name=keywords content="OpenShift,Tekton"><meta name=description content="Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.
On OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.
That&rsquo;s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges."><meta name=author content><link rel=canonical href=https://blog.chmouel.com/2022/03/07/running-tasks-as-non-root-on-openshift-pipelines/><link crossorigin=anonymous href=/assets/css/stylesheet.min.286ffbab1cfdcf5c35ec0edbfc67759192b408de6939c558bbd4a964ca89f552.css integrity="sha256-KG/7qxz9z1w17A7b/Gd1kZK0CN5pOcVYu9SpZMqJ9VI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.chmouel.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.chmouel.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.chmouel.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.chmouel.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.chmouel.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Running tasks as non root on OpenShift Pipelines"><meta property="og:description" content="Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.
On OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.
That&rsquo;s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.chmouel.com/2022/03/07/running-tasks-as-non-root-on-openshift-pipelines/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-07T08:04:02+00:00"><meta property="article:modified_time" content="2022-03-07T08:04:02+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Running tasks as non root on OpenShift Pipelines"><meta name=twitter:description content="Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.
On OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.
That&rsquo;s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.chmouel.com/posts/"},{"@type":"ListItem","position":2,"name":"Running tasks as non root on OpenShift Pipelines","item":"https://blog.chmouel.com/2022/03/07/running-tasks-as-non-root-on-openshift-pipelines/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Running tasks as non root on OpenShift Pipelines","name":"Running tasks as non root on OpenShift Pipelines","description":"Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.\nOn OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.\nThat\u0026rsquo;s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges.","keywords":["OpenShift","Tekton"],"articleBody":"Expanding on my previous blog post on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.\nOn OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called pipelines.\nThat’s it, unless overridden by the user in its pipelinerun or taskrun, it will use the pipelines ServiceAccount which has a few elevated privileges..\nThe ServiceAccount has a custom SecurityContext (SCC) called pipelines-scc bound to it which allows running an image as any UUID.\nWe added this service account because building and pushing images to a registry is a very common use case on OpenShift Pipelines and to get buildah working under OpenShift Pipelines root was previously the only solution to run buildah.\nOne side effect of this SCC is that any images running on Openshift Cluster, unless the container image has a “USER $user” in its dockerfile will run as root. So even standard tasks like the “git-clone” tasks end up checking out code as root when it really doesn’t need to.\nIf you want to run all your pipelines as non root (and you probably want it) and the images you are using have the ability to do it, you can make the pipelines-scc running everything by default as the user 1000 by modifying it.\nSimply edit the scc as cluster-admin with oc edit scc pipelines-scc and modify the runAsUser section with :\nrunAsUser:  type: MustRunAs  uid: 1000 The ClusterTask shipped with openshift-pipelines needs to have a slight modification when running as uid 1000, to get the volumeMount path corrected, you can grab the modified buildah task from here :\nhttps://gist.github.com/chmouel/8242806100ffa7164bb63d7d5b0a593d#file-buildah-task-yaml\nExample Here is an example pipeline :\nhttps://github.com/chmouel/scratchmyback/blob/f6a0329832ee55a339a7acec8095aba276d651a5/.tekton/pipeline.yaml\nIt has three tasks.\n A git repository clone using the (modified) git-clone cluster task A simple task as taskspec which tests if we can write to the workspace where we have the source code checkout. A buildah task building a container and pushing it to the internal openshift registry.  When you run this pipeline you can see that everything with run as non root as user 1000 :\n% tkn pr logs -Lf [clone : clone] ++ id [clone : clone] + echo ' Running as uid=1000 gid=0(root) ps=0(root),1000670000' [clone : clone] Running as uid=1000 gid=0(root) groups=0(root),1000670000 [....] [task-spec : task-spec] ++ id [task-spec : task-spec] + echo ' I can write here I am uid=1000(1000) 0(root) groups=0(root),1000670000' [task-spec : task-spec] + ls -l . [task-spec : task-spec] total 52 [....] userns-buildah : build] ++ id [userns-buildah : build] Running as USER ID uid=1000(build) gid=1000(build) ps=1000(build),1000670000 [userns-buildah : build] + echo ' Running as USER ID uid=1000(build) 1000(build) groups=1000(build),1000670000' [userns-buildah : build] + buildah --storage-driver=vfs bud --format=oci --tls-fy=true --no-cache -f ./Dockerfile -t image-registry.openshift-image-stry.svc:5000/test/userns:latest . [userns-buildah : build] STEP 1: FROM registry.access.redhat.com/ubi8/ubi-mal:8.5 [...] [userns-buildah : build] Storing signatures [userns-buildah : build] STEP 2: RUN id [userns-buildah : build] uid=0(root) gid=0(root) groups=0(root) [userns-buildah : build] STEP 3: COMMIT image-registry.openshift-image-stry.svc:5000/test/userns:latest [userns-buildah : build] -- 3637c099315 [userns-buildah : build] c0993158a555352c26ca9f8ed6406f916a708511b95f6135a8ba02432b96 [userns-buildah : push] ++ id [userns-buildah : push] + echo ' Running as USER ID uid=1000(build) 1000(build) groups=1000(build),1000670000' [userns-buildah : push] Running as USER ID uid=1000(build) gid=1000(build) ps=1000(build),1000670000 [userns-buildah : push] + buildah --storage-driver=vfs push --tls-verify=true --stfile /workspace/source/image-digest image-registry.openshift-image-stry.svc:5000/test/userns:latest docker://image-registry.openshift-image-stry.svc:5000/test/userns:latest [...] [userns-buildah : push] Writing manifest to image destination [userns-buildah : push] Storing signatures [...] Conclusion There may be some restrictions when running rootless buildah where some images may not work but for most use cases this it should not need elevated priviliges to run your Tasks.\nWe are still exploring different solutions to make this more flexible and hopefully make this easier to set-up\n","wordCount":"628","inLanguage":"en","datePublished":"2022-03-07T08:04:02Z","dateModified":"2022-03-07T08:04:02Z","author":{"@type":"Person","name":"chmouel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chmouel.com/2022/03/07/running-tasks-as-non-root-on-openshift-pipelines/"},"publisher":{"@type":"Organization","name":"Chmouel's blog","logo":{"@type":"ImageObject","url":"https://blog.chmouel.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.chmouel.com/ accesskey=h title="Chmouel's blog (Alt + H)">Chmouel's blog</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://github.com/chmouel/ title=Github><span>Github</span></a></li><li><a href=https://photos.chmouel.com title=Photos><span>Photos</span></a></li><li><a href=https://app.strava.com/athletes/126695 title=Strava><span>Strava</span></a></li><li><a href=https://twitter.com/chmouel title=Twitter><span>Twitter</span></a></li><li><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Running tasks as non root on OpenShift Pipelines</h1><div class=post-meta><span title="2022-03-07 08:04:02 +0000 UTC">March 7, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/chmouel/blog/tree/main/content/posts/2022-03-07-running-tasks-as-non-root-on-openshift-pipelines.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#example aria-label=Example>Example</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>Expanding on my <a href=https://blog.chmouel.com/2022/01/25/user-namespaces-with-buildah-and-openshift-pipelines/ title=" previous blog post">previous blog post</a> on getting buildah to run with user namespaces or as rootless. There is another important security topic to talk about is how to run everything on OpenShift Pipeline as non root and not just the buildah task.</p><p>On OpenShift Pipelines we made the conscious decision to run all the TaskRuns and Pipelinerun by default under a custom ServiceAccount called <code>pipelines</code>.</p><p>That&rsquo;s it, unless overridden by the user in its pipelinerun or taskrun, it will use the <code>pipelines</code> ServiceAccount which has a few elevated privileges..</p><p>The ServiceAccount has a custom SecurityContext (SCC) called <code>pipelines-scc</code> bound to it which allows running an image as any UUID.</p><p>We added this service account because building and pushing images to a registry is a very common use case on OpenShift Pipelines and to get buildah working under OpenShift Pipelines root was previously the only solution to run buildah.</p><p>One side effect of this SCC is that any images running on Openshift Cluster, unless the container image has a <em>“USER $user</em>” in its dockerfile will run as root. So even standard tasks like the “git-clone” tasks end up checking out code as root when it really doesn’t need to.</p><p>If you want to run all your pipelines as non root (and you probably want it) and the images you are using have the ability to do it, you can make the <code>pipelines-scc</code> running everything by default as the user 1000 by modifying it.</p><p>Simply edit the scc as <code>cluster-admin</code> with <code>oc edit scc pipelines-scc</code> and modify the <code>runAsUser</code> section with :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ff79c6>runAsUser</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>type</span>: MustRunAs
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>uid</span>: <span style=color:#bd93f9>1000</span>
</span></span></code></pre></div><p>The <code>ClusterTask</code> shipped with openshift-pipelines needs to have a slight modification when running as uid 1000, to get the volumeMount path corrected, you can grab the modified <code>buildah</code> task from here :</p><p><a href=https://gist.github.com/chmouel/8242806100ffa7164bb63d7d5b0a593d#file-buildah-task-yaml>https://gist.github.com/chmouel/8242806100ffa7164bb63d7d5b0a593d#file-buildah-task-yaml</a></p><h3 id=example>Example<a hidden class=anchor aria-hidden=true href=#example>#</a></h3><p>Here is an example pipeline :</p><p><a href=https://github.com/chmouel/scratchmyback/blob/f6a0329832ee55a339a7acec8095aba276d651a5/.tekton/pipeline.yaml>https://github.com/chmouel/scratchmyback/blob/f6a0329832ee55a339a7acec8095aba276d651a5/.tekton/pipeline.yaml</a></p><p>It has three tasks.</p><ol><li>A git repository clone using the (modified) git-clone cluster task</li><li>A simple task as taskspec which tests if we can write to the workspace where we have the source code checkout.</li><li>A buildah task building a container and pushing it to the internal openshift registry.</li></ol><p>When you run this pipeline you can see that everything with run as non root as user 1000 :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>% tkn pr logs -Lf
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>clone : clone<span style=color:#ff79c6>]</span> ++ id
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>clone : clone<span style=color:#ff79c6>]</span> + <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#39; Running as uid=1000 gid=0(root) ps=0(root),1000670000&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>clone : clone<span style=color:#ff79c6>]</span> Running as <span style=color:#8be9fd;font-style:italic>uid</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1000</span> <span style=color:#8be9fd;font-style:italic>gid</span><span style=color:#ff79c6>=</span>0<span style=color:#ff79c6>(</span>root<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>groups</span><span style=color:#ff79c6>=</span>0<span style=color:#ff79c6>(</span>root<span style=color:#ff79c6>)</span>,1000670000
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>....<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>task-spec : task-spec<span style=color:#ff79c6>]</span> ++ id
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>task-spec : task-spec<span style=color:#ff79c6>]</span> + <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#39; I can write here I am uid=1000(1000) 0(root) groups=0(root),1000670000&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>task-spec : task-spec<span style=color:#ff79c6>]</span> + ls -l .
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>task-spec : task-spec<span style=color:#ff79c6>]</span> total <span style=color:#bd93f9>52</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>....<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>userns-buildah : build<span style=color:#ff79c6>]</span> ++ id
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> Running as USER ID <span style=color:#8be9fd;font-style:italic>uid</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>gid</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>ps</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span>,1000670000
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> + <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#39; Running as USER ID uid=1000(build) 1000(build) groups=1000(build),1000670000&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> + buildah --storage-driver<span style=color:#ff79c6>=</span>vfs bud --format<span style=color:#ff79c6>=</span>oci --tls-fy<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span> --no-cache -f ./Dockerfile -t image-registry.openshift-image-stry.svc:5000/test/userns:latest .
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> STEP 1: FROM registry.access.redhat.com/ubi8/ubi-mal:8.5
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>...<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> Storing signatures
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> STEP 2: RUN id
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> <span style=color:#8be9fd;font-style:italic>uid</span><span style=color:#ff79c6>=</span>0<span style=color:#ff79c6>(</span>root<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>gid</span><span style=color:#ff79c6>=</span>0<span style=color:#ff79c6>(</span>root<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>groups</span><span style=color:#ff79c6>=</span>0<span style=color:#ff79c6>(</span>root<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> STEP 3: COMMIT image-registry.openshift-image-stry.svc:5000/test/userns:latest
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> --&gt; 3637c099315
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : build<span style=color:#ff79c6>]</span> c0993158a555352c26ca9f8ed6406f916a708511b95f6135a8ba02432b96
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> ++ id
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> + <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#39; Running as USER ID uid=1000(build) 1000(build) groups=1000(build),1000670000&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> Running as USER ID <span style=color:#8be9fd;font-style:italic>uid</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>gid</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>ps</span><span style=color:#ff79c6>=</span>1000<span style=color:#ff79c6>(</span>build<span style=color:#ff79c6>)</span>,1000670000
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> + buildah --storage-driver<span style=color:#ff79c6>=</span>vfs push --tls-verify<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span> --stfile /workspace/source/image-digest image-registry.openshift-image-stry.svc:5000/test/userns:latest docker://image-registry.openshift-image-stry.svc:5000/test/userns:latest
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>...<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> Writing manifest to image destination
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>userns-buildah : push<span style=color:#ff79c6>]</span> Storing signatures
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>...<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h3><p>There may be some restrictions when running rootless buildah where some images may not work but for most use cases this it should not need elevated priviliges to run your Tasks.</p><p>We are still exploring different solutions to make this more flexible and hopefully make this easier to set-up</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.chmouel.com/tags/openshift/>OpenShift</a></li><li><a href=https://blog.chmouel.com/tags/tekton/>tekton</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.chmouel.com/>Chmouel's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>